@startuml
autonumber "<b>[0]"
participant "SARAD App" as app
participant "REST API" as api
participant "Device Actor\nusb_actor" as device_actor
participant "Redirector Actor" as redirector
participant "Cluster Actor" as cluster
participant "Device File" as file

app -> api: GET free
activate api
api -> file: get_state_from_file()
api -> device_actor: ask FREE
activate device_actor
device_actor -> api: RETURN: FREE
api -> app: return outcome
deactivate api
device_actor -> redirector: CMD: KILL
activate redirector
note over redirector: close listening socket
redirector -> device_actor: RETURN: KILL
destroy redirector
device_actor -> file: write
device_actor -> cluster: CMD: FREE
deactivate device_actor
@enduml
